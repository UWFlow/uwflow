- table:
    schema: aggregate
    name: course_easy_buckets
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_id
      - value
      - count
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - course_id
      - value
      - count
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: course_rating
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_id
      - filled_count
      - comment_count
      - liked
      - easy
      - useful
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - course_id
      - filled_count
      - comment_count
      - liked
      - easy
      - useful
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: course_review_rating
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - review_id
      - upvote_count
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - review_id
      - upvote_count
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: course_useful_buckets
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_id
      - value
      - count
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - course_id
      - value
      - count
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: prof_clear_buckets
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - prof_id
      - value
      - count
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - prof_id
      - value
      - count
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: prof_engaging_buckets
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - prof_id
      - value
      - count
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - prof_id
      - value
      - count
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: prof_rating
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - prof_id
      - filled_count
      - comment_count
      - clear
      - engaging
      - liked
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - prof_id
      - filled_count
      - comment_count
      - clear
      - engaging
      - liked
      filter: {}
      allow_aggregations: true
- table:
    schema: aggregate
    name: prof_review_rating
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - review_id
      - upvote_count
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - review_id
      - upvote_count
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: course
  object_relationships:
  - name: rating
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: course_rating
        column_mapping:
          id: course_id
  array_relationships:
  - name: antirequisites
    using:
      foreign_key_constraint_on:
        column: course_id
        table:
          schema: public
          name: course_antirequisite
  - name: course_easy_buckets
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: course_easy_buckets
        column_mapping:
          id: course_id
  - name: course_useful_buckets
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: course_useful_buckets
        column_mapping:
          id: course_id
  - name: postrequisites
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: course_postrequisite
        column_mapping:
          id: course_id
  - name: prerequisites
    using:
      foreign_key_constraint_on:
        column: course_id
        table:
          schema: public
          name: course_prerequisite
  - name: profs_teaching
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: prof_teaches_course
        column_mapping:
          id: course_id
  - name: reviews
    using:
      foreign_key_constraint_on:
        column: course_id
        table:
          schema: public
          name: review
  - name: sections
    using:
      foreign_key_constraint_on:
        column: course_id
        table:
          schema: public
          name: course_section
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - id
      - code
      - name
      - description
      - prereqs
      - coreqs
      - antireqs
      filter: {}
  - role: user
    permission:
      columns:
      - id
      - antireqs
      - code
      - coreqs
      - description
      - name
      - prereqs
      filter: {}
- table:
    schema: public
    name: course_antirequisite
  object_relationships:
  - name: antirequisite
    using:
      foreign_key_constraint_on: antirequisite_id
  - name: course
    using:
      foreign_key_constraint_on: course_id
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_id
      - antirequisite_id
      filter: {}
  - role: user
    permission:
      columns:
      - course_id
      - antirequisite_id
      filter: {}
- table:
    schema: public
    name: course_postrequisite
  object_relationships:
  - name: course
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: course
        column_mapping:
          course_id: id
  - name: postrequisite
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: course
        column_mapping:
          postrequisite_id: id
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_id
      - postrequisite_id
      - is_corequisite
      filter: {}
  - role: user
    permission:
      columns:
      - course_id
      - postrequisite_id
      - is_corequisite
      filter: {}
- table:
    schema: public
    name: course_prerequisite
  object_relationships:
  - name: course
    using:
      foreign_key_constraint_on: course_id
  - name: prerequisite
    using:
      foreign_key_constraint_on: prerequisite_id
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_id
      - prerequisite_id
      - is_corequisite
      filter: {}
  - role: user
    permission:
      columns:
      - course_id
      - prerequisite_id
      - is_corequisite
      filter: {}
- table:
    schema: public
    name: course_review_upvote
  insert_permissions:
  - role: user
    permission:
      check:
        user_id:
          _eq: X-Hasura-User-Id
      columns:
      - review_id
      - user_id
  select_permissions:
  - role: user
    permission:
      columns:
      - review_id
      - user_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: course_search_index
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - prof_ids
      - terms
      - course_id
      - ratings
      - easy
      - liked
      - useful
      - code
      - name
      - has_prereqs
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - prof_ids
      - terms
      - course_id
      - ratings
      - easy
      - liked
      - useful
      - code
      - name
      - has_prereqs
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: course_section
  object_relationships:
  - name: course
    using:
      foreign_key_constraint_on: course_id
  array_relationships:
  - name: exams
    using:
      foreign_key_constraint_on:
        column: section_id
        table:
          schema: public
          name: section_exam
  - name: meetings
    using:
      foreign_key_constraint_on:
        column: section_id
        table:
          schema: public
          name: section_meeting
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - class_number
      - course_id
      - enrollment_capacity
      - enrollment_total
      - id
      - section_name
      - term_id
      - updated_at
      filter: {}
  - role: user
    permission:
      columns:
      - class_number
      - course_id
      - enrollment_capacity
      - enrollment_total
      - id
      - section_name
      - term_id
      - updated_at
      filter: {}
- table:
    schema: public
    name: prof
  object_relationships:
  - name: rating
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: prof_rating
        column_mapping:
          id: prof_id
  array_relationships:
  - name: prof_clear_buckets
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: prof_clear_buckets
        column_mapping:
          id: prof_id
  - name: prof_courses
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: prof_teaches_course
        column_mapping:
          id: prof_id
  - name: prof_engaging_buckets
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: prof_engaging_buckets
        column_mapping:
          id: prof_id
  - name: reviews
    using:
      foreign_key_constraint_on:
        column: prof_id
        table:
          schema: public
          name: review
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - id
      - code
      - name
      - picture_url
      filter: {}
  - role: user
    permission:
      columns:
      - id
      - code
      - name
      - picture_url
      filter: {}
- table:
    schema: public
    name: prof_review_upvote
  insert_permissions:
  - role: user
    permission:
      check:
        user_id:
          _eq: X-Hasura-User-Id
      columns:
      - review_id
      - user_id
  select_permissions:
  - role: user
    permission:
      columns:
      - review_id
      - user_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: prof_search_index
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - course_ids
      - course_codes
      - prof_id
      - ratings
      - clear
      - engaging
      - liked
      - name
      - code
      filter: {}
      allow_aggregations: true
  - role: user
    permission:
      columns:
      - course_ids
      - course_codes
      - prof_id
      - ratings
      - clear
      - engaging
      - liked
      - name
      - code
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: prof_teaches_course
  object_relationships:
  - name: course
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: course
        column_mapping:
          course_id: id
  - name: prof
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: prof
        column_mapping:
          prof_id: id
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - prof_id
      - course_id
      filter: {}
  - role: user
    permission:
      columns:
      - prof_id
      - course_id
      filter: {}
- table:
    schema: public
    name: review
  object_relationships:
  - name: author
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: review_author
        column_mapping:
          id: review_id
  - name: course
    using:
      foreign_key_constraint_on: course_id
  - name: course_review_rating
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: course_review_rating
        column_mapping:
          id: review_id
  - name: prof
    using:
      foreign_key_constraint_on: prof_id
  - name: prof_review_rating
    using:
      manual_configuration:
        remote_table:
          schema: aggregate
          name: prof_review_rating
        column_mapping:
          id: review_id
  - name: user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: review_user_id
        column_mapping:
          id: review_id
  array_relationships:
  - name: course_review_upvotes
    using:
      foreign_key_constraint_on:
        column: review_id
        table:
          schema: public
          name: course_review_upvote
  - name: prof_review_upvotes
    using:
      foreign_key_constraint_on:
        column: review_id
        table:
          schema: public
          name: prof_review_upvote
  insert_permissions:
  - role: user
    permission:
      check:
        user_id:
          _eq: X-Hasura-User-Id
      columns:
      - course_id
      - prof_id
      - user_id
      - liked
      - course_easy
      - course_useful
      - course_comment
      - prof_clear
      - prof_engaging
      - prof_comment
      - public
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - id
      - course_id
      - prof_id
      - liked
      - course_easy
      - course_useful
      - course_comment
      - prof_clear
      - prof_engaging
      - prof_comment
      - public
      - created_at
      - updated_at
      filter: {}
  - role: user
    permission:
      columns:
      - id
      - course_id
      - prof_id
      - liked
      - course_easy
      - course_useful
      - course_comment
      - prof_clear
      - prof_engaging
      - prof_comment
      - public
      - created_at
      - updated_at
      filter: {}
  update_permissions:
  - role: user
    permission:
      columns:
      - prof_id
      - liked
      - course_easy
      - course_useful
      - course_comment
      - prof_clear
      - prof_engaging
      - prof_comment
      - public
      filter:
        user_id:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: review_author
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - review_id
      - full_name
      - program
      - picture_url
      filter: {}
  - role: user
    permission:
      columns:
      - review_id
      - full_name
      - program
      - picture_url
      filter: {}
- table:
    schema: public
    name: review_user_id
  select_permissions:
  - role: user
    permission:
      columns:
      - review_id
      - user_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: section_exam
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - section_id
      - start_seconds
      - end_seconds
      - date
      - location
      - day
      - is_tba
      filter: {}
  - role: user
    permission:
      columns:
      - section_id
      - start_seconds
      - end_seconds
      - date
      - location
      - day
      - is_tba
      filter: {}
- table:
    schema: public
    name: section_meeting
  object_relationships:
  - name: prof
    using:
      foreign_key_constraint_on: prof_id
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - section_id
      - prof_id
      - start_seconds
      - end_seconds
      - start_date
      - end_date
      - location
      - days
      - is_cancelled
      - is_closed
      - is_tba
      filter: {}
  - role: user
    permission:
      columns:
      - section_id
      - prof_id
      - start_seconds
      - end_seconds
      - start_date
      - end_date
      - location
      - days
      - is_cancelled
      - is_closed
      - is_tba
      filter: {}
- table:
    schema: public
    name: user
  array_relationships:
  - name: courses_taken
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: user_course_taken
  - name: reviews
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: review
  - name: schedule
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: user_schedule
  - name: shortlist
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: user_shortlist
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - secret_id
      - email
      - first_name
      - last_name
      - full_name
      - picture_url
      - program
      filter:
        id:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - email
      - picture_url
      filter:
        id:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: user_course_taken
  object_relationships:
  - name: course
    using:
      foreign_key_constraint_on: course_id
  select_permissions:
  - role: user
    permission:
      columns:
      - course_id
      - user_id
      - term_id
      - level
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: user_schedule
  object_relationships:
  - name: section
    using:
      foreign_key_constraint_on: section_id
  - name: user
    using:
      foreign_key_constraint_on: user_id
  select_permissions:
  - role: user
    permission:
      columns:
      - user_id
      - section_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: user_shortlist
  object_relationships:
  - name: course
    using:
      foreign_key_constraint_on: course_id
  insert_permissions:
  - role: user
    permission:
      check:
        user_id:
          _eq: X-Hasura-User-Id
      columns:
      - course_id
      - user_id
  select_permissions:
  - role: user
    permission:
      columns:
      - course_id
      - user_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - course_id
      - user_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        user_id:
          _eq: X-Hasura-User-Id
- table:
    schema: queue
    name: section_subscribed
  object_relationships:
  - name: section
    using:
      foreign_key_constraint_on: section_id
  - name: user
    using:
      foreign_key_constraint_on: user_id
  insert_permissions:
  - role: user
    permission:
      check:
        user_id:
          _eq: X-Hasura-User-Id
      columns:
      - user_id
      - section_id
  select_permissions:
  - role: user
    permission:
      columns:
      - user_id
      - section_id
      filter:
        user_id:
          _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        user_id:
          _eq: X-Hasura-User-Id
